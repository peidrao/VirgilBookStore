{% extends "base.html" %}
{% block title %}Virgil Bookstore - Catalogo{% endblock %}
{% block content %}
    <main class="container mx-auto px-4 py-8">

        <!-- Breadcrumb -->
        <nav class="mb-6 text-sm" aria-label="Breadcrumb">
            <ol class="flex items-center gap-2 text-gray-600">
                <li><a href="index.html" class="hover:text-amber-700">Home</a></li>
                <li>›</li>
                <li class="text-gray-900 font-medium">Catálogo</li>
            </ol>
        </nav>

        <!-- Title and Controls -->
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
            <div>
                <h1 class="text-3xl font-bold text-gray-900 mb-2">Todos os Livros</h1>
                <p class="text-gray-600">Mostrando <span id="results-count">144</span> resultados</p>
            </div>

            <div class="flex items-center gap-3">
                <!-- Mobile Filter Button -->
                <button id="filter-toggle"
                        class="lg:hidden flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
                    </svg>
                    Filtros <span id="filter-badge"
                                  class="hidden bg-amber-600 text-white text-xs font-bold rounded-full px-2 py-0.5">3</span>
                </button>

                <!-- Sort -->
                <div>
                    <label for="sort-select" class="sr-only">Ordenar por</label>
                    <select id="sort-select"
                            class="px-4 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 cursor-pointer">
                        <option value="relevance">Relevância</option>
                        <option value="price-asc">Preço: menor</option>
                        <option value="price-desc">Preço: maior</option>
                        <option value="rating">Mais bem avaliados</option>
                        <option value="newest">Lançamentos</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="flex gap-6">

            <!-- Filters Sidebar - Desktop -->
            <aside class="hidden lg:block w-64 flex-shrink-0">
                <div class="bg-white rounded-lg shadow-md p-6 sticky top-24">
                    <h2 class="font-bold text-lg mb-4">Filtros</h2>

                    <!-- Categoria -->
                    <div class="mb-6">
                        <h3 class="font-semibold text-gray-900 mb-3">Categoria</h3>
                        <div class="space-y-2">
                            <label class="flex items-center cursor-pointer hover:text-amber-700">
                                <input type="checkbox" class="mr-2 rounded text-amber-600 focus:ring-amber-500">
                                <span class="text-sm">Ficção (32)</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:text-amber-700">
                                <input type="checkbox" class="mr-2 rounded text-amber-600 focus:ring-amber-500">
                                <span class="text-sm">Fantasia (28)</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:text-amber-700">
                                <input type="checkbox" class="mr-2 rounded text-amber-600 focus:ring-amber-500">
                                <span class="text-sm">Romance (24)</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:text-amber-700">
                                <input type="checkbox" class="mr-2 rounded text-amber-600 focus:ring-amber-500">
                                <span class="text-sm">Suspense (19)</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:text-amber-700">
                                <input type="checkbox" class="mr-2 rounded text-amber-600 focus:ring-amber-500">
                                <span class="text-sm">Autoajuda (15)</span>
                            </label>
                        </div>
                    </div>

                    <!-- Preço -->
                    <div class="mb-6">
                        <h3 class="font-semibold text-gray-900 mb-3">Faixa de Preço</h3>
                        <div class="space-y-3">
                            <input type="range" min="0" max="200" value="200" class="w-full accent-amber-600">
                            <div class="flex justify-between text-sm text-gray-600">
                                <span>R$ 0</span>
                                <span>R$ 200+</span>
                            </div>
                        </div>
                    </div>

                    <!-- Idioma -->
                    <div class="mb-6">
                        <h3 class="font-semibold text-gray-900 mb-3">Idioma</h3>
                        <label for="language-select" class="sr-only">Selecionar idioma</label>
                        <select id="language-select"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 text-sm">
                            <option>Todos</option>
                            <option>Português</option>
                            <option>Inglês</option>
                            <option>Espanhol</option>
                        </select>
                    </div>

                    <!-- Rating -->
                    <div class="mb-6">
                        <h3 class="font-semibold text-gray-900 mb-3">Avaliação Mínima</h3>
                        <div class="space-y-2">
                            <label class="flex items-center cursor-pointer hover:text-amber-700">
                                <input type="radio" name="rating" class="mr-2 text-amber-600 focus:ring-amber-500">
                                <span class="text-sm flex items-center">★★★★★ (5.0)</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:text-amber-700">
                                <input type="radio" name="rating" class="mr-2 text-amber-600 focus:ring-amber-500"
                                       checked>
                                <span class="text-sm flex items-center">★★★★☆ (4.0+)</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:text-amber-700">
                                <input type="radio" name="rating" class="mr-2 text-amber-600 focus:ring-amber-500">
                                <span class="text-sm flex items-center">★★★☆☆ (3.0+)</span>
                            </label>
                        </div>
                    </div>

                    <!-- Formato -->
                    <div class="mb-6">
                        <h3 class="font-semibold text-gray-900 mb-3">Formato</h3>
                        <div class="space-y-2">
                            <label class="flex items-center cursor-pointer hover:text-amber-700">
                                <input type="checkbox" class="mr-2 rounded text-amber-600 focus:ring-amber-500">
                                <span class="text-sm">Físico</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:text-amber-700">
                                <input type="checkbox" class="mr-2 rounded text-amber-600 focus:ring-amber-500">
                                <span class="text-sm">E-book</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:text-amber-700">
                                <input type="checkbox" class="mr-2 rounded text-amber-600 focus:ring-amber-500">
                                <span class="text-sm">Audiobook</span>
                            </label>
                        </div>
                    </div>

                    <!-- Disponibilidade -->
                    <div class="mb-6">
                        <label class="flex items-center justify-between cursor-pointer">
                            <span class="font-semibold text-gray-900">Disponível</span>
                            <input type="checkbox" class="toggle-checkbox sr-only">
                            <div class="toggle-bg w-11 h-6 bg-gray-300 rounded-full relative">
                                <div class="toggle-dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition"></div>
                            </div>
                        </label>
                    </div>

                    <!-- Clear Filters -->
                    <button class="w-full py-2 text-amber-700 hover:text-amber-800 font-medium border border-amber-700 rounded-lg hover:bg-amber-50 transition-colors">
                        Limpar Filtros
                    </button>
                </div>
            </aside>

            <!-- Mobile Filter Drawer -->
            <div id="filter-drawer" class="fixed inset-0 z-50 lg:hidden hidden">
                <div class="absolute inset-0 bg-black bg-opacity-50" id="filter-overlay"></div>
                <aside class="filter-drawer absolute top-0 left-0 bottom-0 w-80 max-w-[85vw] bg-white shadow-xl overflow-y-auto">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="font-bold text-lg">Filtros</h2>
                            <button id="filter-close" class="p-2 hover:bg-gray-100 rounded-lg"
                                    aria-label="Fechar filtros">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                          d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>

                        <!-- Same filters as desktop -->
                        <div class="mb-6">
                            <h3 class="font-semibold text-gray-900 mb-3">Categoria</h3>
                            <div class="space-y-2">
                                <label class="flex items-center cursor-pointer"><input type="checkbox"
                                                                                       class="mr-2 rounded text-amber-600 filter-checkbox"><span
                                        class="text-sm">Ficção (32)</span></label>
                                <label class="flex items-center cursor-pointer"><input type="checkbox"
                                                                                       class="mr-2 rounded text-amber-600 filter-checkbox"><span
                                        class="text-sm">Fantasia (28)</span></label>
                                <label class="flex items-center cursor-pointer"><input type="checkbox"
                                                                                       class="mr-2 rounded text-amber-600 filter-checkbox"><span
                                        class="text-sm">Romance (24)</span></label>
                                <label class="flex items-center cursor-pointer"><input type="checkbox"
                                                                                       class="mr-2 rounded text-amber-600 filter-checkbox"><span
                                        class="text-sm">Suspense (19)</span></label>
                                <label class="flex items-center cursor-pointer"><input type="checkbox"
                                                                                       class="mr-2 rounded text-amber-600 filter-checkbox"><span
                                        class="text-sm">Autoajuda (15)</span></label>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h3 class="font-semibold text-gray-900 mb-3">Faixa de Preço</h3>
                            <input type="range" min="0" max="200" value="200" class="w-full accent-amber-600">
                            <div class="flex justify-between text-sm text-gray-600 mt-2">
                                <span>R$ 0</span>
                                <span>R$ 200+</span>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h3 class="font-semibold text-gray-900 mb-3">Idioma</h3>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                <option>Todos</option>
                                <option>Português</option>
                                <option>Inglês</option>
                            </select>
                        </div>

                        <div class="flex gap-3">
                            <button class="flex-1 py-2 text-amber-700 font-medium border border-amber-700 rounded-lg">
                                Limpar
                            </button>
                            <button id="apply-filters"
                                    class="flex-1 py-2 bg-amber-700 text-white font-medium rounded-lg">Aplicar
                            </button>
                        </div>
                    </div>
                </aside>
            </div>

            <!-- Books Grid -->
            <div class="flex-1">
                <div class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6">

                    {% for book in books %}
                        {% include "catalog/catalog_book.html" with book=book %}
                    {% endfor %}
                </div>

                <!-- Pagination -->
                <nav class="mt-12 flex justify-center" aria-label="Paginação">
                    <ul class="flex items-center gap-2">
                        <li>
                            <button class="px-3 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                                    disabled aria-label="Página anterior">
                                ‹
                            </button>
                        </li>
                        <li>
                            <button class="px-4 py-2 rounded-md bg-amber-700 text-white font-medium">1</button>
                        </li>
                        <li>
                            <button class="px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50">2</button>
                        </li>
                        <li>
                            <button class="px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50">3</button>
                        </li>
                        <li>
                            <button class="px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50">4</button>
                        </li>
                        <li>
                            <button class="px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50">5</button>
                        </li>
                        <li>
                            <button class="px-3 py-2 rounded-md border border-gray-300 hover:bg-gray-50"
                                    aria-label="Próxima página">
                                ›
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>

        </div>
    </main>

{% endblock %}
